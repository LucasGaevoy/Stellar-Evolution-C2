<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Stellar Evolution</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{
      margin: 0;
      padding: 0;
      background: #f4f6f800;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    .format{
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
    }

    .title{
      text-align: center;
      margin: 0 0 30px 0;
      font-weight: 600;
    }

    /*h2{
      text-align: center;
      color: #379bb9;
      margin-top: 20px;
    }*/

    .container{
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-top: 20px;
    }

    .panel{
      background-color: #e8f0f86a;
      border-radius: 12px;
      padding: 15px;
      width: 630px;
      height: 540px;
      box-shadow: 2px 2px 8px rgba(182, 182, 182, 0.486);
    }

    #star-view{
      position: relative;
      text-align: left;
      display: flex;
      flex-direction: column;
      padding: 15px;
    }

    #hr-diagram{
      position: relative;
      flex-direction: column;
      padding: 15px;
    }

    .info{
      flex: 1;
    }

    .StarArea{
      position:absolute;
      
    }

    .Sun{
      position:absolute;
    }

    .mass-box{
      position: absolute;
      top: 15px;
      right: 15px;
      width: 300px;
    }

    .mass-label{
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      margin-bottom: 6px;
    }

    #MassInput{
      width: 70px;
    }

    .time-box{
      margin-top: auto;
      display: flex;
      gap: 10px;
      margin-top: auto;
    }

    .time-label{
      font-size: 14px;
      white-space: nowrap;
    }

    #PlayButton{
      font-size: 16px;
      cursor: pointer;
    }

    .slidecontainer {
    width: 300px;
    margin: 10px auto;
    }

    .slider {
    appearance: none;
    width: 100%;
    height: 20px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
    }

    .slider:hover {
    opacity: 1;
    }

    .slider::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    background: #759ec0;
    cursor: pointer;
    }
    .slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #759ec0;
    cursor: pointer;
    }
  </style>
</head>

<body>

<div class="format">

  <h1 class="title">Stellar Evolution</h1> 

  <div class="container">
    
    <div id="star-view" class="panel">
      
      <div class="info">
        Luminosity: <br>
        Spectral type: <br>
        Radius: <br>
        Evolutionary stage: <br>
      </div>

      <div class="Star">
        
      </div>

      <div class="Sun">

      </div>

      <div class="mass-box">
        <div style="display:flex; align-items:center; gap:5px; margin-bottom:5px;">
          <label>Mass:</label>
          <input type="number" id="MassInput" min="0.1" max="150" step="0.1" value="1">
          M<sub>&odot;</sub>
        </div>
        <input type="range" min="0.1" max="150" value="1" step="0.1" class="slider" id="MassRange">
      </div>

      <div class="time-box" style="display:flex; align-items:center; gap:10px; margin-top:auto;">
        <button id="PlayButton">&#9654;</button>
        <span class="time-label">
          Time: <span id="TimeDemo">0</span>%
        </span>
        <input type="range" min="0" max="100" value="0" class="slider" id="Timeline" style="flex:1;">
      </div>

    </div>

    <div id="hr-diagram" class="panel">
      HR diagram

    </div>

  </div>

  
  <script>
    const MassSlider = document.getElementById("MassRange");
    const MassInput = document.getElementById("MassInput");
    function UpdateMassDisplay(val){
      val = parseFloat(val);
      if (isNaN(val)) return null;
      if (val < 0.1) val = 0.1;
      if (val > 150) val = 150;
      MassSlider.value = val;
      if (val < 1) {
        MassInput.value = val.toFixed(1);
      } else{
        MassInput.value = Math.round(val);
      }
    }
    MassSlider.oninput = function (){
      UpdateMassDisplay(this.value);
    }
    MassInput.oninput = function (){
      let val = parseFloat(this.value);
      if(isNaN(val)) return;
      MassSlider.value = val;
    }
    MassInput.onchange = function (){
      let val = parseFloat(this.value);
      if (isNaN(val)) return;
      if (val < 0.1) val = 0.1;
      if (val > 150) val = 150;
      MassSlider.value = val;
      if(val<1) MassInput.value = val.toFixed(1);
      else MassInput.value = Math.round(val);
    }
  
    const TimeSlider = document.getElementById("Timeline");
    const TimeOutput = document.getElementById("TimeDemo");
    const PlayButton = document.getElementById("PlayButton");
    let playing = false;
    let timer = null;
    
    function stopPlay(){
      playing = false;
      PlayButton.innerHTML = "&#9654;";
      clearInterval(timer);
    }
    function UpdateTimeLable(){
      TimeOutput.innerHTML = TimeSlider.value;
    }
    UpdateTimeLable();
    TimeSlider.oninput = UpdateTimeLable;
    PlayButton.onclick = function(){
      if(!playing){
        playing = true;
        PlayButton.innerHTML = "&#9208;";
        timer = setInterval(() => {
          if(TimeSlider.value>=100){
            stopPlay();
          } else{
            TimeSlider.value = parseInt(TimeSlider.value) + 1;
            UpdateTimeLable();
          }
        }, 100);
      } else{
        stopPlay();
      }
    }
  </script>

  <canvas id="diagram" width="500" height="500"></canvas>

  <script>
    var canvas=document.getElementById("diagram")
    var ctx=canvas.getContext('2d');
    ctx.beginPath();
    ctx.moveTo(20,480);
    ctx.lineTo(480,480);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(50,350);
    ctx.lineTo(50,50);
    ctx.stroke();
    for(var i=0; i<=500; i+=20){
      ctx.beginPath();
      ctx.moveTo(20+i,345);
      ctx.lineTo(20+i,355);
      ctx.stroke();
      ctx.fillText(i,45+i,370);
    }
    for (var i=0;i<=500;i+=20){
      ctx.beginPath();
      ctx.moveTo(45,350-i);
      ctx.lineTp(55,350-i);
      ctx.stroke();
      ctx.fillText(i,20,355-i); 
    }
  </script>

</div>

</body>
</html>